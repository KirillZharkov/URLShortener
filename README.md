# URLShortener

## Содержание

- [О проекте](#о-проекте)
- [Технологии](#технологии)
- [Функциональность](#функциональность)
- [Быстрый старт (локально)](#быстрый-старт-локально)
- [API (пример)](#api-пример)
- [Рекомендации и улучшения](#рекомендации-и-улучшения)

---

## О проекте
URLShortener — лёгкий REST-сервис для создания коротких ссылок и редиректа на исходный URL. Проект написан на Go; структура репозитория содержит `cmd/url-shortener`, `config`, `internal`, workflow для GitHub Actions и т. п. (см. репозиторий).
Этот проект делался по видео https://www.youtube.com/watch?v=rCJvW2xgnk0 со своими доработаками

---

## Технологии

Проект построен на Go и использует набор минимальных библиотек для построения REST API, работы с конфигурацией, валидацией данных и хранением ссылок.

### Основные библиотеки

- **github.com/go-chi/chi/v5** — лёгкий и быстрый HTTP-роутер.  
- **github.com/go-chi/render** — рендеринг JSON-ответов и стандартная обработка ошибок.  
- **github.com/go-playground/validator/v10** — валидатор структур по тэгам(проверка URL).  
- **github.com/ilyakaznacheev/cleanenv** — удобная загрузка конфигурации из `.env` или YAML.  
- **github.com/mattn/go-sqlite3** — драйвер SQLite для Go.  
- **github.com/fatih/color** — цветной вывод в консоль.  
- **golang.org/x/exp** — экспериментальные утилиты Go.  

---

## Функциональность
Сервис сокращения ссылок предоставляет следующие функции:

- **Создание короткой ссылки**  
  Пользователь отправляет длинный URL -> получает короткий alias, который сам запросит.

- **Переход по короткой ссылке (редирект)**  
  При обращении к `/{alias}` сервер перенаправляет пользователя на исходный URL.

- **Хранение ссылок в базе данных (SQLite)**  
  Короткие ссылки сохраняются в локальную БД (если нет подключения к серверу!).

- **Проверка корректности входящих URL**  
  Перед сохранением ссылка проходит валидацию через `validator`.

- **Логирование входящих запросов**  
  Сервис выводит сообщения о работе (цветной вывод через `color`).

- **Работа через REST API**  
  Все операции (создание, редирект, тестирование) доступны через HTTP.

---

## Быстрый старт (локально)

Работал в vscode , мне нужно было скачать msys64 для отладки. И я не устанваливал переменные окружения , я их задавал с каждый раз при запуске
```powershell
  go build
  $env:PATH += ";C:\msys64\ucrt64\bin"
  $env:CONFIG_PATH = ".\config\local.yaml"
  go run .\cmd\url_shortener\
```  
---

## API (пример)

1. Создание короткой ссылки

POST http://155.212.157.171:8082/url
{
    "url":"https://ya.ru",
    "alias":"1234"
}

2. Редирект

GET http://155.212.157.171:8082/1234
в поисковую строку браузера -> перенаправляет на https://ya.ru 

2. Удаление

DELETE http://155.212.157.171:8082/1234
Полностью удалит все данные ввода "url" и "alias"

## Рекомендации и улучшения

Можно деплой сделать через Docker без `YAML`, но пока лень